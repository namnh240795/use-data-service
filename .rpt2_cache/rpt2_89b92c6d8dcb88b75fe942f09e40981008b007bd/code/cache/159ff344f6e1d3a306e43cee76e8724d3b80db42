{"code":"import * as tslib_1 from \"tslib\";\r\nimport { useState } from \"react\";\r\nvar m = require(\"use-deep-compare-effect\");\r\nvar useDeepCompareEffect = m.default;\r\n// by pass warning of deep compare\r\nvar EMPTY_OBJECT = {};\r\nexport default function useDataService(service, params) {\r\n    var _this = this;\r\n    var _a = useState(true), loading = _a[0], setLoading = _a[1];\r\n    var _b = useState({}), data = _b[0], setData = _b[1];\r\n    var _c = useState(null), error = _c[0], setError = _c[1];\r\n    useDeepCompareEffect(function () {\r\n        (function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n            var response;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!loading) {\r\n                            setLoading(true);\r\n                        }\r\n                        return [4 /*yield*/, service(params)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (response) {\r\n                            if (response.success) {\r\n                                setData(response.data);\r\n                            }\r\n                            else {\r\n                                setError(response.data);\r\n                            }\r\n                            setLoading(false);\r\n                        }\r\n                        else {\r\n                            // eslint-disable-next-line no-console\r\n                            console.warn('invalid error', service, params);\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); })();\r\n    }, [params, EMPTY_OBJECT]);\r\n    return [loading, data, error];\r\n}\r\n","references":["/Users/quangthinh/Documents/TeamSoft/opensource/use-service/node_modules/@types/react/index.d.ts","/Users/quangthinh/Documents/TeamSoft/opensource/use-service/node_modules/use-deep-compare-effect/dist/use-deep-compare-effect.cjs.js"],"dts":{"name":"/Users/quangthinh/Documents/TeamSoft/opensource/use-service/index.d.ts","writeByteOrderMark":false,"text":"export interface ServiceResult {\r\n    success: boolean;\r\n    data: any;\r\n}\r\nexport declare type ServiceParams = any;\r\nexport declare type ValueOrPromise<T> = PromiseLike<T> | T;\r\nexport interface ServiceFn {\r\n    (params: ServiceParams): ValueOrPromise<ServiceResult>;\r\n}\r\nexport declare type HookResult = [boolean, any, any];\r\nexport default function useDataService(service: ServiceFn, params: ServiceParams): HookResult;\r\n"}}
